<?php
/*******************************************************************/
/************* Próba feladat: adatbázis kezelés ********************/
/*** Sáros Csaba                                                  **/
/*** 2021.07.29                                                   **/
/*******************************************************************/
/*******************************************************************/

class dbFuncs
{
/*********************************************************************************/
/**************************** Private variables **********************************/
/*********************************************************************************/
private $db;
/*********************************************************************************/
/**************************** Public functions ***********************************/
/*********************************************************************************/
public function __construct($db)
{
  $this->db = $db;
}
//------------------------------------------------------------------------------//
public function saveTask($arr)
{
  $sql = "insert into ta_task (ta_op_a, ta_op_b, ta_operator, ta_op_x) values (".$arr['opA'].",".$arr['opB'].",'".$arr['opOp']."',".$arr['opRes'].");";
  $result = $this->execSQL($sql); 
  return $result;
}
//------------------------------------------------------------------------------//
public function getResult($id)
{
  $sql = "select ta_op_x from ta_task where ta_id = ".$id.";";
  $result = $this->querySQL($sql); 
  return $result;
}
//------------------------------------------------------------------------------//
/*********************************************************************************/
/*************************** Private functions ***********************************/
/*********************************************************************************/
private function querySQL($sql)
{//Futtatja a megadott lekérdezést (Q) 
  $dbRes = $this->db->query($sql);
  $result = $dbRes->fetch(PDO::FETCH_ASSOC); 
  return $result;   
}
//------------------------------------------------------------------------------//
private function execSQL($sql)
{//Futtatja a megadott SQL-t (UDI) 
  $res = $this->db->exec($sql);
  if ($res === 1)
    {
     return $this->db->lastInsertId();
    }
  else
    {  
     return -1;
    }   
}
//------------------------------------------------------------------------------//
//End of Class
};